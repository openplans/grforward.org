/*! planbox 2015-01-12 */

var Planbox=Planbox||{};!function(a,b){"use strict";a.TimelineController=function(){},a.TimelineController.prototype={initEvents:function(a){a.find("li.event").each(function(a,c){var d,e,f=b(c),g=new Date,h=f.find(".event-datetime").attr("data-datetime"),i=f.find(".event-details").attr("data-tags");d=new Date(h),d.setHours(0,0,0,0),e=new Date(h),e.setHours(11,59,59,999),f.addClass(g>e?"past-event":"future-event");var j=i.split(";");b.data(c,"tags",_.without(j,""))});var c=a.find(".past-event").length,d=a.find(".future-event").length;c&&(a.find(".past-event").addClass("hide"),a.find(".show-more-past-events").removeClass("hide")),d>4&&(a.find(".future-event").slice(4).addClass("hide"),a.find(".show-more-future-events").removeClass("hide"))},showPastEvents:function(a){a.find("li.past-event").removeClass("hide"),a.find(".show-more-past-events").addClass("hide")},showFutureEvents:function(a){a.find("li.future-event").removeClass("hide"),a.find(".show-more-future-events").addClass("hide")},showEventsBySelectedTags:function(a){var c=a.data("selectedTags");a.find("li.event").removeClass("hide"),0!==c.length&&a.find("li.event").each(function(a,d){var e=b.data(d,"tags")||[];0===_.intersection(c,e).length&&b(d).addClass("hide")})},handleShowPastEventsBtn:function(a){a.preventDefault();var c=b(a.currentTarget),d=c.parents(".project-section-timeline");this.showPastEvents(d)},handleShowFutureEventsBtn:function(a){a.preventDefault();var c=b(a.currentTarget),d=c.parents(".project-section-timeline");this.showFutureEvents(d)},handleClickTagBtn:function(a){a.preventDefault();var c=b(a.currentTarget),d=c.text(),e=c.parents(".project-section-timeline"),f=e.data("selectedTags");e.data("selectedTags",f||[]),f=e.data("selectedTags"),_.contains(f,d)?this.deselectTag(e,d,c):this.selectTag(e,d,c)},selectTag:function(a,b,c){a.find(".tag-btn").removeClass("selected").addClass("tertiary"),c&&c.addClass("selected").removeClass("tertiary"),a.data("selectedTags",[b]),this.showPastEvents(a),this.showFutureEvents(a),this.showEventsBySelectedTags(a)},deselectTag:function(a,b,c){var d,e=a.data("selectedTags");c&&c.removeClass("selected").addClass("tertiary"),d=_.indexOf(e,b),e.splice(d,1),a.data("selectedTags",e),this.showPastEvents(a),this.showFutureEvents(a),this.showEventsBySelectedTags(a)},handleShowEventDetails:function(a){a.preventDefault();var c=b(a.currentTarget),d=c.parents(".event").find(".event-details");d.toggleClass("hide")}},b(function(){var c=new a.TimelineController;c.initEvents(b(".project-section-timeline")),b(document).on("click","#page .show-more-past-events",_.bind(c.handleShowPastEventsBtn,c)),b(document).on("click","#page .show-more-future-events",_.bind(c.handleShowFutureEventsBtn,c)),b(document).on("click","#page .tag-btn",_.bind(c.handleClickTagBtn,c)),b(document).on("click","#page .show-event-details",_.bind(c.handleShowEventDetails,c))})}(Planbox,jQuery);var Planbox=Planbox||{};!function(a,b){"use strict";a.genericException=function(a,b,c){var d=new Error(b);return d.name=a,d.data=c,d},a.app=new Backbone.Marionette.Application,a.app.addRegions({mainRegion:"#page",modalRegion:"#modal-container"}),a.app.addInitializer(function(){Backbone.Marionette.TemplateCache.prototype.compileTemplate=function(a){return Handlebars.compile(a)}}),a.app.addInitializer(function(){window.addEventListener("dragover",function(a){a=a||event,a.preventDefault()},!1),window.addEventListener("drop",function(a){a=a||event,a.preventDefault()},!1)}),b(function(){a.app.start()}),b(window).load(function(){b(document).foundation({magellan:{}})})}(Planbox,jQuery);
//# sourceMappingURL=static-app.min.map